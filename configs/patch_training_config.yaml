# Patch-Basedè®­ç»ƒç³»ç»Ÿé…ç½®æ–‡ä»¶
# ä½œè€…ï¼šAIç®—æ³•å›¢é˜Ÿ
# æ—¥æœŸï¼š2025-08-24

# ==================== æ•°æ®é…ç½® ====================
data:
  data_root: "./output_motion_fix"          # æ•°æ®æ ¹ç›®å½•
  batch_size: 4                             # æ‰¹æ¬¡å¤§å°
  num_workers: 4                            # æ•°æ®åŠ è½½çº¿ç¨‹æ•°
  pin_memory: true                          # æ˜¯å¦å›ºå®šå†…å­˜

# ==================== æ¨¡å‹é…ç½® ====================
model:
  inpainting_network:
    input_channels: 7                       # è¾“å…¥é€šé“æ•° (WarPedRGB + holes + occlusion + ResidualMV)
    output_channels: 3                      # è¾“å‡ºé€šé“æ•° (RGB)

# ==================== è®­ç»ƒé…ç½® ====================
training:
  max_epochs: 100                           # æœ€å¤§è®­ç»ƒè½®æ•°
  optimizer:
    learning_rate: 0.00005                   # ğŸ”§ ä¿®å¤ï¼šæå‡å­¦ä¹ ç‡è§£å†³æ”¶æ•›è¿‡æ…¢é—®é¢˜
    weight_decay: 0.00001                   # æƒé‡è¡°å‡
  scheduler:
    T_max: 100                              # ä½™å¼¦é€€ç«å‘¨æœŸ
    eta_min: 0.000001                       # æœ€å°å­¦ä¹ ç‡
  log_dir: "./logs/patch_training"          # æ—¥å¿—ç›®å½•

# ==================== Patché…ç½® ====================
patch:
  enable_patch_mode: true                   # å¯ç”¨patchæ¨¡å¼
  patch_size: 128                           # patchå°ºå¯¸
  patch_mode_probability: 0.7               # patchæ¨¡å¼ä½¿ç”¨æ¦‚ç‡
  
  # Patchç”Ÿæˆé…ç½®
  min_patches_per_image: 1                  # æ¯å›¾æœ€å°‘patchæ•°
  max_patches_per_image: 8                  # æ¯å›¾æœ€å¤špatchæ•°
  patch_overlap_threshold: 0.3              # patché‡å é˜ˆå€¼
  
  # ç¼“å­˜é…ç½®
  enable_patch_cache: false                 # å¯ç”¨patchç¼“å­˜ (DISABLED: æ¸…ç†æ±¡æŸ“çš„å¢å¼ºç¼“å­˜)
  cache_size: 1000                          # æœ€å¤§ç¼“å­˜patchæ•°é‡
  cache_hit_threshold: 0.8                  # ç¼“å­˜å‘½ä¸­ç‡é˜ˆå€¼
  
  # æ•°æ®å¢å¼ºé…ç½®
  patch_augmentation: false                 # patchçº§æ•°æ®å¢å¼º (DISABLED: è§£å†³é¢œè‰²åç§»é—®é¢˜)
  augmentation_probability: 0.0             # æ•°æ®å¢å¼ºæ¦‚ç‡ (DISABLED)
  
  # è´¨é‡æ§åˆ¶
  min_hole_area: 100                        # æœ€å°ç©ºæ´é¢ç§¯
  max_hole_area: 10000                      # æœ€å¤§ç©ºæ´é¢ç§¯
  boundary_margin: 16                       # è¾¹ç•Œä¿ç•™è¾¹è·

# ==================== è®­ç»ƒè°ƒåº¦é…ç½® ====================
schedule:
  # è®­ç»ƒé˜¶æ®µé…ç½®
  patch_warmup_epochs: 20                   # patchæ¨¡å¼çƒ­èº«é˜¶æ®µ
  mixed_training_epochs: 50                 # æ··åˆè®­ç»ƒé˜¶æ®µ
  full_fine_tuning_epochs: 30               # å…¨å›¾fine-tuningé˜¶æ®µ
  
  # æ¨¡å¼åˆ‡æ¢ç­–ç•¥
  initial_patch_probability: 0.9            # åˆå§‹patchæ¦‚ç‡
  final_patch_probability: 0.3              # æœ€ç»ˆpatchæ¦‚ç‡
  
  # è‡ªé€‚åº”è°ƒåº¦
  enable_adaptive_scheduling: true          # å¯ç”¨è‡ªé€‚åº”è°ƒåº¦
  loss_patience: 5                          # æŸå¤±æ— æ”¹å–„å®¹å¿epochs
  
  # æ€§èƒ½é˜ˆå€¼
  patch_efficiency_threshold: 1.5           # patchæ•ˆç‡é˜ˆå€¼ï¼ˆç›¸æ¯”fullæ¨¡å¼ï¼‰
  quality_drop_threshold: 0.05              # è´¨é‡ä¸‹é™å®¹å¿é˜ˆå€¼

# ==================== å¯è§†åŒ–é…ç½® ====================
visualization:
  enable_visualization: true                # å¯ç”¨å¯è§†åŒ–
  visualization_frequency: 100              # å¯è§†åŒ–é¢‘ç‡ï¼ˆæ¯Næ­¥ï¼‰
  save_frequency: 500                       # ä¿å­˜é¢‘ç‡ï¼ˆæ¯Næ­¥ï¼‰

# ==================== åŸºå‡†æµ‹è¯•é…ç½® ====================
benchmark:
  # æµ‹è¯•å‚æ•°
  test_epochs: 5                            # æµ‹è¯•epochæ•°
  test_samples: 100                         # æ¯ä¸ªæµ‹è¯•çš„æ ·æœ¬æ•°
  repeat_runs: 3                            # é‡å¤è¿è¡Œæ¬¡æ•°
  warmup_steps: 10                          # é¢„çƒ­æ­¥éª¤æ•°
  
  # å†…å­˜ç›‘æ§
  memory_monitoring: true                   # å¯ç”¨å†…å­˜ç›‘æ§
  memory_check_interval: 0.1                # å†…å­˜æ£€æŸ¥é—´éš”(ç§’)
  
  # è´¨é‡è¯„ä¼°
  quality_metrics:                          # è´¨é‡æŒ‡æ ‡åˆ—è¡¨
    - "loss"
    - "psnr"
    - "ssim"
  convergence_patience: 10                  # æ”¶æ•›è€å¿ƒå€¼
  min_improvement: 0.001                    # æœ€å°æ”¹å–„é˜ˆå€¼
  
  # ç»Ÿè®¡åˆ†æ
  confidence_level: 0.95                    # ç½®ä¿¡æ°´å¹³
  significance_threshold: 0.05              # æ˜¾è‘—æ€§é˜ˆå€¼
  
  # è¾“å‡ºæ§åˆ¶
  save_detailed_logs: true                  # ä¿å­˜è¯¦ç»†æ—¥å¿—
  generate_plots: true                      # ç”Ÿæˆå›¾è¡¨
  save_raw_data: true                       # ä¿å­˜åŸå§‹æ•°æ®

# ==================== é«˜çº§é…ç½® ====================
advanced:
  # æ··åˆç²¾åº¦è®­ç»ƒ
  use_mixed_precision: true                 # ä½¿ç”¨æ··åˆç²¾åº¦
  
  # æ¢¯åº¦ç›¸å…³
  gradient_clip_val: 1.0                    # æ¢¯åº¦è£å‰ªå€¼
  accumulate_grad_batches: 1                # æ¢¯åº¦ç´¯ç§¯æ‰¹æ¬¡
  
  # æ£€æŸ¥ç‚¹
  save_top_k: 3                             # ä¿å­˜æœ€å¥½çš„Kä¸ªæ¨¡å‹
  monitor_metric: "val_loss"                # ç›‘æ§æŒ‡æ ‡
  
  # æ—©åœ
  early_stopping_patience: 15               # æ—©åœè€å¿ƒå€¼
  early_stopping_min_delta: 0.001          # æ—©åœæœ€å°æ”¹å–„

# ==================== å®éªŒé…ç½® ====================
experiment:
  name: "patch_training_v1"                 # å®éªŒåç§°
  description: "Patch-based mobile frame interpolation training"  # å®éªŒæè¿°
  tags:                                     # å®éªŒæ ‡ç­¾
    - "patch-based"
    - "mobile"
    - "frame-interpolation"
  
  # ç§å­é…ç½®
  seed: 42                                  # éšæœºç§å­
  deterministic: false                      # ç¡®å®šæ€§è®­ç»ƒï¼ˆå½±å“æ€§èƒ½ï¼‰